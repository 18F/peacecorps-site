{% extends "donations/base.jinja" %}

{% block title %}Peace Corps - Donate{% endblock %}
{% block header %}Peace Corps - Donate{% endblock %}
{% block content_class %}project{% endblock %}

{% block content %}
{% include "donations/includes/project-top.jinja" %}

<article class="showcase_inset--sm">
  {{project.description|safe}}
</article>

<div class="u-clearfix"></div>

<div class="showcase--main showcase--neutral">
  <div class="showcase_inset--lg bm3">
    <h5 class="t-heading_sm">give to {{project.title}}</h5>
    {% set percent_completed = project.account.percent_funded() %}
    {% set percent_community = project.account.percent_community_funded() %}
    <div class="rectangular_progress rectangular_progress--secondary">
      <span class="rectangular_progress__point"
          style="left:{{percent_community}}%;">
        community constributions<br>
        <strong>
          {{humanize_amount(project.account.community_contribution)}}
        </strong>
      </span>
      <span style="left: {{percent_community}}%;"
          class="rectangular_progress__line">
      </span>
      <span class="rectangular_progress__point u-align_r" style="right: 0;">
        <strong>
          {{humanize_amount(project.account.goal)}}
        </strong><br>
        goal to reach
      </span>
      <span style="left: 100%;"
          class="rectangular_progress__line">
      </span>
      <div class="rectangular_progress__bar">
        <div class="rectangular_progress__filled"
            style="width: {{percent_completed}}%;">
        </div>
      </div>
      <span style="left: {{percent_completed}}%;"
          class="rectangular_progress__line
                rectangular_progress__line--bottom">
      </span>
      <span class="rectangular_progress__point
                   rectangular_progress__point--bottom"
          style="left: {{percent_completed}}%;">
        total raised<br>
        <strong>
          {{humanize_amount(project.account.current)}}
        </strong>
      </span>
    </div>
  </div>
  <div class="showcase_inset--lg">
    <form method="post" class="bubble_form form_hide--radio">
      {% csrf_token %}
      <fieldset>
        <legend class="t-heading_md">Choose an amount to give</legend>
        {{top_form.payment_amount.errors}}
        {% for radio in top_form.presets %}
          {% set preset_all = (radio.choice_value == 'preset-all') %}
          {% if not preset_all or not project.account.funded() %}
            {% if radio.choice_value == 'preset-all' %}
            <div class="showcase--line_25">
            {% else %}
            <div class="showcase--line_16">
            {% endif %}
              {{ radio.tag() }}
              {% if radio.choice_value == 'custom' %}
                <label class="bubble bubble--white bubble--bordered bubble--square"
                    for="{{radio.id_for_label}}" >
                  <span class="bubble__content" style="left: 10%">
                    <strong>$</strong>
                  </span>
                  {{ top_form.payment_amount }}
                </label>
              {% else %}
                <label
                    class="bubble
                    bubble--white
                    bubble--bordered
                    {% if preset_all %}bubble--rectangle{% endif %}
                    bubble--square"
                    for="{{radio.id_for_label}}">
                  <span class="bubble__content "><strong>
                      {% if not preset_all %}${% endif %}
                    {{radio.choice_label}}
                  </strong></span>
                </label>
              {% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </fieldset>
      <button class="button button--primary">
        {% if project.account.funded() %}
          Donate to Help Similar Projects
        {% else %}
          Donate
        {% endif %}
      </button>
    </form>
  </div>
</div>

{% endblock %}

{% block custom_js %}
<script type="text/javascript" src="{{ static("peacecorps/js/country_map.js")
    }}"></script>
{% endblock %}

