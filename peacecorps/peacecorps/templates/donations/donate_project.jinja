{% extends "donations/base.jinja" %}

{% block title %}Peace Corps - Donate{% endblock %}
{% block header %}Peace Corps - Donate{% endblock %}
{% block content_class %}project{% endblock %}

{% block navigation %}
<h2>{{project.title}}</h2>
{% endblock %}

{% block content %}
<p class="tagline">{{project.tagline}}</p>

<div class="featured-image">
  <img src="{{project.featured_image.url}}" alt="{{project.featured_image.description}}">
  <figcaption>{{project.featured_image.caption}}</figcaption>
</div>

<div class="donation-stats">
  {% if project.volunteerpicture %}
    <div class="volunteer-image">
      <img src="{{project.volunteerpicture.url}}"
           alt="{{project.volunteerpicture.description}}">
    </div>
  {% endif %}
  <div class="volunteer-info">
    <p><strong>{{project.volunteername}}</strong> from <strong>{{project.volunteerhomecity}}, {{project.volunteerhomestate}}</strong></p>
    {% set funded_percent = project.fund.percent_funded() %}
    <div class="funded-chart">
      <div class="funded-amount-bar" style="max-width: {{funded_percent }}%;">&nbsp;</div>
      <div class="funded-amount-text">{{ funded_percent|round|int }}% funded</div>
    </div>
    <p>Funds sought: <strong>${{project.fund.fundgoal/100}}</strong></p>

  </div>
</div>

<form method="post">
  {% csrf_token %}
  <div class="radio-container">
    {{top_form.payment_amount.errors}}
    {% for radio in top_form.presets %}
      {% if radio.choice_value != 'preset-all' or not project.fund.funded() %}
        <div>
          {{ radio.tag() }}
          {% if radio.choice_value == 'custom' %}
            {{ top_form.payment_amount }}
          {% else %}
            <label for="{{radio.id_for_label}}">{{radio.choice_label}}</label>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
  <div class="button-container">
    {% if project.fund.funded() %}
      <input type="submit" value="Donate to Help Similar Projects" />
    {% else %}
      <input type="submit" value="Donate" />
    {% endif %}
  </div>
</form>

<div class="description">
    {{project.description|safe}}
</div>

<form method="post">
  {% csrf_token %}
  <div class="radio-container">
    {{bottom_form.payment_amount.errors}}
    {% for radio in bottom_form.presets %}
      {% if radio.choice_value != 'preset-all' or not project.fund.funded() %}
        <div>
          {{ radio.tag() }}
          {% if radio.choice_value == 'custom' %}
            {{ bottom_form.payment_amount }}
          {% else %}
            <label for="{{radio.id_for_label}}">{{radio.choice_label}}</label>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>
  <div class="button-container">
    {% if project.fund.funded() %}
      <input type="submit" value="Donate to Help Similar Projects" />
    {% else %}
      <input type="submit" value="Donate" />
    {% endif %}
  </div>
</form>
{% endblock %}
