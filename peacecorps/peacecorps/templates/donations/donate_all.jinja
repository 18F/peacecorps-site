{% extends "donations/base.jinja" %}

{% block title %}PEACECORPS{% endblock %}
{% block header %}PEACECORPS{% endblock %}
{% block content_class %}landing{% endblock %}

{% block content %}

<nav class="js-discoverNav">
  <a href="#" data-filter-type="issue">Issues</a>
  <a href="#" data-filter-type="country">Countries</a>
  <a href="#" data-filter-type="volunteer">Volunteers</a>
</nav>
<table class="js-discoverApp">
  {% for issue in issues %}
    <tr class="js-filteredItem" name="{{ issue.name }}"
        data-filter-type="issue" >
      <td><img width=50" src="{{ issue.icon.url }}"
               alt="{{ issue.name }}" /></td>
      <td><h3>{{ issue.name }}</h3></td>
    </tr>
  {% endfor %}
  {% for country in countries %}
    <tr class="js-filteredItem"
        data-filter-type="country"
        name="{{ country.name }}">
      <td>
        {{ country_map(country.code) }}
      </td>
      <td><h3>{{ country.name }}</h3></td>
    </tr>
  {% endfor %}
  {% for volunteer in volunteers %}
    <tr class="js-filteredItem"
        data-filter-type="volunteer"
        name="{{ volunteer.name }}">
      <td>
        <img src="{{ volunteer.picture.url }}"
             alt="{{ volunteer.name }}" />
      </td>
      <td>
        <h3>{{ volunteer.name }}</h3>
        <p>{{ volunteer.homestate }}, {{ volunteer.homecountry }}</p>
      </td>
    </tr>
  {% endfor %}
  {% for project in  projects %}
    <tr class="js-detailItem" name="{{ project.title }}">
      <td>
        <img src="{{ volunteerpicture }}" alt="{{ volunteername }}" />
      </td>
      <td>
        <h3>{{ project.title }}</h3>
        <p>{{ project.description }}</p>

        <div class="rectangular_progress rectangular_progress--secondary">
          {# TODO make macro #}
          {% set percent_completed = project.account.percent_funded() %}
          <div class="rectangular_progress__bar">
            <div class="rectangular_progress__filled"
                style="width: {{ percent_completed }}%;">
            </div>
          </div>
        </div>

        <a class="button button--sm button--primary" href="">
         Give to the project</a>
        <a href="{{ url("donate project", slug=project.slug) }}">
          Read more</a>
      </td>
    </tr>
  {% endfor %}
</table>

{% endblock %}

{% macro country_map(code) -%}
  <div class="mask mask--oval mask--bordered u-h_center--block map">
    <img src="{{ static("peacecorps/img/countries/" + code.lower()
                        + ".svg") }}"
         class="mask__content" />
  </div>
{%- endmacro %}

